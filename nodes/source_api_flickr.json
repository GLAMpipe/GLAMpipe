{
	"nodeid": "source_api_flickr",
	"type": "source",
	"subtype": "API",
	"title": "Flickr import",
	"description": "Import from Flickr (requires an API key)",
	"type_desc": "With source node you can import your data to metapipe. Your data can be in file (xml, csv, tsv or json) or data can be imported from API.",
	
	"scripts": {
		"url":"var base_url = 'https://api.flickr.com/services/rest/?method=flickr.photosets.getPhotos'; var format = '&format=json&nojsoncallback=?'; out.url = base_url + '&photoset_id=' + context.node.params.album + format + '&api_key=' + context.node.params.apikey",
		
		"before_run":"context.console.log('running ' + context.node.title);",
		"run":"out.value = context.data.photoset.photo;",
		"after_run":"out.msg = 'Flickr images fetched'"
	},
	
	"views": {
		"params":"<label>Flickr API key </label><input type=\"text\" name=\"apikey\" id=\"apikey\" required /><label>Album ID</label><input type=\"text\" name=\"album\" id=\"album\" required />",
		"settings":"no settings"
	}
}
