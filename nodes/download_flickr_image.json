{
    "nodeid": "download_flickr_image",
    "type": "download",
    "subtype": "Flickr",
    "title": "images",
    "description": "Downloads images from Flickr URL based on getSizes API-call.",


    "scripts": {
        "init":"out.say('progress', 'I have ' + context.doc_count + ' images to download!');",
        "run": [
                "var size = context.node.params.size;",
                "var url = context.doc.id_photo_sizes.size[size].source;",
                "out.url = url;",
                "var splitted = url.split('/');",
                "out.file = splitted[splitted.length - 1];",
                "out.say('progress', url);"
                ],
        "finish":"out.say('finish', 'Images downloaded!')"
    },
    
    "views": {
        "params":[
                    "<label>Choose image size</label>",
                    "<select name=\"size\">",
                    "    <option value='3'>small</option>",
                    "    <option value='5'>medium</option>",
                    "    <option value='7'>original</option>",
                    "</select>"
                    ],
        "settings": [
                    "no settings"
                    ]
    }
}
